<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daftar Promo Bulanan — Fabriku</title>

  <style>
    :root{
      --bg:#f6f8fa;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0ea5a4;
    }
    body{
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
      background:var(--bg);
      margin:0;
      color:#111;
    }
    .container{
      max-width:1100px;
      margin:28px auto;
      padding:20px;
    }
    header{
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    h1{
      margin:0;
      font-size:22px;
      font-weight:600;
    }
    .controls{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    select,input[type=search]{
      padding:8px 10px;
      border-radius:8px;
      border:1px solid #e6e9ee;
      background:#fff;
      font-size:14px;
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(270px,1fr));
      gap:18px;
      margin-top:20px;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      padding:16px;
      box-shadow:0 6px 18px rgba(16,24,40,0.06);
      border:1px solid rgba(15,23,42,0.05);
    }
    .card h3{
      margin:0 0 6px;
      font-size:17px;
      font-weight:600;
    }
    .meta{
      font-size:13px;
      color:var(--muted);
      margin-bottom:8px;
    }
    .desc{
      white-space:pre-line;
      font-size:14px;
      color:#111;
      line-height:1.45;
    }
    .tag{
      display:inline-block;
      padding:4px 8px;
      border-radius:999px;
      font-size:12px;
      background:rgba(14,165,164,0.08);
      color:var(--accent);
      border:1px solid rgba(14,165,164,0.12);
    }
    .actions{
      display:flex;
      gap:8px;
    }
    button{
      padding:8px 14px;
      border-radius:8px;
      border:0;
      background:var(--accent);
      color:#fff;
      cursor:pointer;
      font-size:14px;
      font-weight:500;
    }
    button.secondary{
      background:#fff;
      border:1px solid #e6e9ee;
      color:#111;
    }
    .empty{
      padding:40px;
      text-align:center;
      color:var(--muted);
      background:white;
      border-radius:12px;
      border:1px dashed #e6e9ee;
      margin-top:20px;
    }

    @media(max-width:600px){
      header{flex-direction:column;align-items:flex-start;}
    }
  </style>
</head>

<body>
  <div class="container">

    <header>
      <h1>Daftar Promo Bulanan Fabriku</h1>

      <div class="controls">
        <select id="monthSel">
          <option value="2025-12">Desember 2025</option>
        </select>

        <input id="search" type="search" placeholder="Cari (nama, kode, ket.)" />

        <div class="actions">
          <button id="printBtn">Cetak</button>
          <button id="exportBtn" class="secondary">Export CSV</button>
        </div>
      </div>
    </header>

    <main>
      <div id="grid" class="grid"></div>
      <div id="empty" class="empty" style="display:none">Tidak ada promo untuk periode ini.</div>
    </main>

  </div>

  <script>
    /* ====================
       DATA PROMO (Des 2025)
       ==================== */

    const PROMOS = {
      "2025-12": [
        {
          id:'P-01',
          title:'Promo ROL',
          start:'2025-12-01',
          end:'2025-12-31',
          tag:'ROL',
          description:`Diskon Semua Item Kecuali MTIIS
2–5 Rol → Rp. 1000/kg
6–10 Rol → Rp. 2000/kg
11–20 Rol → Rp. 2500/kg
21–30 Rol → Rp. 3000/kg
31–40 Rol → Rp. 3500/kg
40 Rol → Rp. 4000/kg
Berlaku hanya untuk kain body dan pembelian offline.`
        },

        {
          id:'P-02',
          title:'Promo Website',
          start:'2025-12-01',
          end:'2025-12-31',
          tag:'website',
          description:`Diskon 3% untuk pembelian semua kain di website Fabriku dengan kode kupon VERSACOTTON.
Tidak berlaku untuk MTIIS.`
        },

        {
          id:'P-03',
          title:'Bracket SPV',
          start:'2025-12-01',
          end:'2025-12-31',
          tag:'SPV',
          description:`21 - 30 rol = Rp. 4.000
31 - 40 rol = Rp. 4.500
40 rol = Rp. 5.000`
        },

        {
          id:'P-04',
          title:'Promo Item Baru',
          start:'2025-12-01',
          end:'2025-12-31',
          tag:'new',
          description:`Versa Cotton Terra — Minimal 5 kg, Diskon 5000/kg.
Cotton Elastech — Minimal 5 kg, Diskon 3000/kg.`
        },

        {
          id:'P-05',
          title:'Promo CVC 24s Lacoste Hitam Setting 42',
          start:'2025-08-01',
          end:'2026-01-01',
          tag:'hitam',
          description:`Product : CVC 24s Lacoste
Warna : Hitam (Kategori TK)
Setting : 42
Diskon 2000/kg

Ketentuan:
• Tanpa minimal qty
• Penjualan body & aksesoris
• Berlaku sampai stock habis
• Penjualan tunai
• Bisa digabung promo lain`
        },

        {
          id:'P-06',
          title:'Promo Dibawah 1 KG',
          start:'2025-01-01',
          end:'2026-01-01',
          tag:'ecer',
          description:`Harga spesial:
• COTTON 65.000
• CVC 45.000
• M-TIIS 55.000

Aturan:
1. Qty max 1 kg
2. Ujung kain tidak dipotong
3. Tidak ada minimal pembelian`
        }
      ]
    };

    const grid = document.getElementById("grid");
    const empty = document.getElementById("empty");
    const search = document.getElementById("search");
    const monthSel = document.getElementById("monthSel");

    function formatRange(s,e){
      const start = new Date(s);
      const end = new Date(e);
      const opt = {day:'numeric', month:'short'};
      return `${start.toLocaleDateString('id-ID',opt)} — ${end.toLocaleDateString('id-ID',opt)}`;
    }

    function render(){
      grid.innerHTML = "";

      const key = monthSel.value;
      const term = search.value.trim().toLowerCase();

      let items = PROMOS[key] || [];

      if(term){
        items = items.filter(i =>
          (i.title + i.id + i.tag + i.description).toLowerCase().includes(term)
        );
      }

      if(items.length === 0){
        empty.style.display = "block";
        grid.style.display = "none";
        return;
      }

      empty.style.display = "none";
      grid.style.display = "grid";

      items.forEach(it=>{
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <h3>${it.title}</h3>
          <div class="meta">${it.id} • ${formatRange(it.start,it.end)} • <span class="tag">${it.tag}</span></div>
          <div class="desc">${it.description}</div>
        `;
        grid.appendChild(card);
      });
    }

    function exportCSV(){
      const key = monthSel.value;
      const rows = PROMOS[key] || [];
      if(rows.length === 0){
        alert("Tidak ada data promo.");
        return;
      }

      const header = ['id','title','start','end','tag','description'];
      const csv = [
        header.join(',')
      ].concat(
        rows.map(r => header.map(h => `"${String(r[h]||'').replace(/"/g,'""')}"`).join(','))
      ).join('\n');

      const blob = new Blob([csv],{type:'text/csv'});
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = `promo-${key}.csv`;
      a.click();

      URL.revokeObjectURL(url);
    }

    search.addEventListener("input", render);
    monthSel.addEventListener("change", render);
    document.getElementById("printBtn").addEventListener("click", ()=>window.print());
    document.getElementById("exportBtn").addEventListener("click", exportCSV);

    render();
  </script>

</body>
</html>
